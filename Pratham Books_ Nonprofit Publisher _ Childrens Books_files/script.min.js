var $donorSlider, mWidth = 767,
    mWidth990 = 990;

function defaultReplacer() {
    $(".defualReplace").each(function() {
        var e = $(this).data("mob"),
            a = $(this).data("desk");
        $(window).width() <= mWidth ? $(this).attr("src", e) : $(this).attr("src", a)
    })
}

function windowReplacer() {
    $(".loadReplace").each(function() {
        var e = $(this).data("mob"),
            a = $(this).data("desk");
        $(window).width() <= mWidth ? $(this).attr("src", e) : $(this).attr("src", a)
    })
}

function loadDesk() {
    $(".loadDesk").each(function() {
        var e = $(this).data("desk");
        $(window).width() > mWidth && $(this).attr("src", e)
    })
}

function loadMob() {
    $(".loadMob").each(function() {
        var e = $(this).data("mob");
        $(window).width() <= mWidth && $(this).attr("src", e)
    })
}

function loadMob990() {
    $(".loadMob990").each(function() {
        var e = $(this).data("mob");
        $(window).width() <= mWidth990 && $(this).attr("src", e)
    })
}

var images2_al = [];

function preloadDesktop() {
    for (var e = 0; e < arguments.length; e++) images2_al[e] = new Image, images2_al[e].src = preloadDesktop.arguments[e]
}
var ww, wh, controller = new ScrollMagic.Controller;

function scrollMagic() {
    var e = 1.2,
        a = 15 * ww / 100;
    ww < 1200 && (e = 1), ww <= 767 && (a = 50 * ww / 100);
    var o = (new TimelineMax).add([TweenMax.fromTo(".s2ImgAni1_1", 4, {
        x: 0,
        scale: e
    }, {
        scale: 1,
        x: -a,
        ease: Linear.easeNone
    }), TweenMax.fromTo(".s2ImgAni1_2", 5, {
        x: 0,
        scale: e
    }, {
        scale: 1,
        x: -a,
        ease: Linear.easeNone
    }), TweenMax.fromTo(".s2ImgAni1_3", 7, {
        x: 0,
        scale: e
    }, {
        scale: 1,
        x: -a,
        ease: Linear.easeNone
    }), TweenMax.fromTo("._s2Small1", 7, {
        x: 0,
        scale: e
    }, {
        scale: 1,
        x: -a,
        ease: Linear.easeNone
    })]);
    $(".s2Img1 img").each(function() {
        new ScrollMagic.Scene({
            triggerElement: ".section2__inner",
            offset: -100,
            duration: 50 * wh / 100,
            reverse: !1
        }).setTween(o).addTo(controller)
    });
    var n = (new TimelineMax).add([TweenMax.fromTo(".s2ImgAni2_1", 4, {
        x: 0,
        scale: e
    }, {
        scale: 1,
        x: a,
        ease: Linear.easeNone
    }), TweenMax.fromTo(".s2ImgAni2_2", 5, {
        x: 0,
        scale: e
    }, {
        scale: 1,
        x: a,
        ease: Linear.easeNone
    }), TweenMax.fromTo(".s2ImgAni2_3", 7, {
        x: 0,
        scale: e
    }, {
        scale: 1,
        x: a,
        ease: Linear.easeNone
    }), TweenMax.fromTo("._s2Small2", 7, {
        x: 0,
        scale: e
    }, {
        scale: 1,
        x: a,
        ease: Linear.easeNone
    })]);
    $(".s2Img1 img").each(function() {
        new ScrollMagic.Scene({
            triggerElement: ".section2__inner",
            offset: -100,
            duration: 50 * wh / 100,
            reverse: !1
        }).setTween(n).addTo(controller)
    }), new ScrollMagic.Scene({
        triggerElement: ".s2ImgAni1_1",
        duration: 1.5 * wh,
        offset: 0
    }).setClassToggle(".s2ImgAni1_2, .s2ImgAni2_2", "leafMove").addTo(controller)
}

function openPopup(e) {
    $("#popup" + e).fadeIn(300, function() {
        var a = $(window).height(),
            o = $("#popup" + e + " .pop-animate").outerHeight() + 20;
        $("html").addClass("open-pop-style")
    }), $("html").addClass("open-pop"), TweenMax.fromTo("#popup" + e + " .pop-animate", .8, {
        y: 15,
        autoAlpha: 0
    }, {
        y: 0,
        autoAlpha: 1,
        ease: Expo.easeOut,
        delay: .3
    })
}

function events() {
    $(".finRep").click(function() {
        var e = $(this).find(".zoomIn").attr("data-zoom-image");
        $("#popup1 .zLarge").attr("src", e);
        var a = $(this).data("pop");
        $(window).scrollTop(), openPopup(a)
    }), $(".event-popup").click(function(e) {
        var a = $(this).data("pop");
        $(window).scrollTop(), openPopup(a), e.preventDefault()
    }), $(".js-closebtn").click(function(e) {
        $(".popup").fadeOut(300, function() {
            $("#wrapper").css({
                height: "auto"
            })
        }), $("html").removeClass("open-pop open-pop-style"), e.preventDefault()
    });
    var e = !0;
    $("#event-logo").click(function(a) {
        e ? (TweenMax.to(".sidebar", .8, {
            x: "0%",
            ease: Expo.easeOut
        }), $(".sidebar").addClass("menu-active"), e = !1) : (TweenMax.to(".sidebar", .3, {
            x: "-100%"
        }), $(".sidebar").removeClass("menu-active"), e = !0), a.preventDefault()
    }), $("#closeSide").click(function(a) {
        TweenMax.to(".sidebar", .3, {
            x: "-100%"
        }), $(".sidebar").removeClass("menu-active"), e = !0, a.preventDefault()
    }), $(window).on("scroll", function() {
        $(".sidebar").hasClass("menu-active") && (TweenMax.to(".sidebar", .3, {
            x: "-100%"
        }), $(".sidebar").removeClass("menu-active"), e = !0)
    }), $(document).on("click", function(a) {
        $(a.target).closest(".sidebar, #event-logo").length || (TweenMax.to(".sidebar", .3, {
            x: "-100%"
        }), $(".sidebar").removeClass("menu-active"), e = !0)
    });
    var a = 50;
    $(window).width() <= 767 && (a = 30), $(".sidebar__inner a").click(function(e) {
        var o = $(this).attr("href");
        $("html, body").animate({
            scrollTop: $(o).offset().top - a
        }, 1500, "easeOutExpo"), e.preventDefault()
    }), $(".js-readMore").click(function(e) {
        var a = $(this).data("target");
        $(".readSlide" + a).slideToggle("easeOutSine"), $(".readSlide_inline" + a).toggle(), $(this).toggleClass("onSlide"), $(".readSlide" + a).find('[data-scroll-reveal="enter from bottom"]:first').addClass("revealText").css({
            "-webkit-transform": "translateY(0)",
            transform: "translateY(0)",
            opacity: 1
        }), e.preventDefault()
    });
    $(".scrollRead").click(function(e) {
        0,
        $("#simpleScroll .simplebar-content-wrapper").animate({
            scrollTop: "+=" + ($("#simpleScroll").height() - 20)
        }),
        e.preventDefault()
    })
}

function bubble() {
    var e = $("#section11").outerHeight() + $("#section10").outerHeight() + 270;
    $(".bubble").css("height", e)
}
ww = $(window).width(), wh = $(window).height(), $(function() {
    scrollMagic(), events(), defaultReplacer(), bubble(), new scrollReveal({
        reset: !1
    }), new SimpleBar(document.getElementById("simpleScroll")), new SimpleBar(document.getElementById("sideScroll")), $(".bubble").circleMagic()
}), $(window).on("resize", function() {
    defaultReplacer(), loadDesk(), loadMob(), loadMob990(), windowReplacer(), bubble()
}), $(window).on("load", function() {
    loadDesk(), loadMob(), loadMob990(), windowReplacer(), preloadDesktop("img/finacial-report-1_large.png", "img/finacial-report-2_large.png", "img/finacial-report-3_large.png"), $("#preloader").fadeOut(function() {
        $("#preloader").remove()
    }), $("body").removeClass("onLoading").addClass("winLoaded"), $("img.load").each(function() {
        var e = $(this).data("src");
        $(this).attr("src", e)
    })
}), window.onbeforeunload = function() {
    window.scrollTo(0, 0)
};


TweenMax.set('svg', {
	visibility: 'visible'
});

var kinkedCurve = "M 316,80 s 0,95, 0,100 0,100 0,100"; // when pulling back -> 95 giving it sharp kink
var straightCurve = "M 316,80 s 0,55, 0,100 0,100 0,100"; // rest position when released without kink -> 55
var snapTime = 0.5;
var drawTime = 0.6;
var snapAmp = 0.95;
var snapPer = 0.1;
var drawEase = Power2.easeOut;
var snapEase = Elastic.easeOut.config(snapAmp, snapPer);

tl = new TimelineMax( { repeat: -1, repeatDelay: 0 } );

tl.set('.arrow', { x: -62, y: 2, scale: 0.8 })
  .set('.bow-frame', { x: 1, y: 1 })
  .from('.string', drawTime, {attr:{d:kinkedCurve}, ease: drawEase})
  .to('.bow', drawTime, { scaleX: 1.1, scaleY: 0.95, ease: drawEase, transformOrigin: "30px center" }, "-="+drawTime)
  .to('.arrow', drawTime, { x: -5, ease: drawEase }, "-="+drawTime)
  .to('.string', snapTime, {attr:{d:straightCurve}, ease: snapEase }) 
  .to('.bow', snapTime, { scaleX: 1, scaleY: 1, ease: snapEase }, "-="+snapTime)
  .to('.arrow', 0.085, { x: -400, ease: Linear.easeNone }, "-="+snapTime)
  .fromTo('.arrow', 0.45, { x: 400 }, { x: -62, ease: Elastic.easeOut.config(1.5, 1.5), immediateRender: false }, "-=0.35")

tl.timeScale(1)


/*  ==========================================================================
    SLIDER
    ========================================================================== */  

////////2



